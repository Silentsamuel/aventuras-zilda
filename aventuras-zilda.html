<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aventuras Zilda - Ca√ßa √†s Moedas</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            font-family: 'Courier New', monospace;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            overflow: hidden;
        }
        
        #rotate-message {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 100;
            text-align: center;
            padding: 20px;
        }
        
        #rotate-message h2 {
            color: #ffd700;
            margin-bottom: 20px;
            font-size: 24px;
        }
        
        #rotate-icon {
            font-size: 60px;
            margin: 20px 0;
            animation: rotate 2s infinite;
        }
        
        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(90deg); }
        }
        
        #game-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            display: none;
        }
        
        #game-canvas {
            background: linear-gradient(to bottom, #87ceeb, #63b8ff);
            display: block;
            width: 100%;
            height: 100%;
        }
        
        #start-screen, #game-over {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            text-align: center;
            z-index: 10;
            padding: 20px;
        }
        
        #game-over {
            display: none;
            background: linear-gradient(135deg, #8b0000, #ff4500);
        }
        
        h1 {
            color: #ffd700;
            text-shadow: 3px 3px 0 #000;
            margin-bottom: 20px;
            font-size: 28px;
        }
        
        button {
            background: linear-gradient(to bottom, #ffd700, #ff8c00);
            border: none;
            padding: 15px 30px;
            margin: 15px;
            border-radius: 25px;
            color: #000;
            font-weight: bold;
            font-size: 18px;
            cursor: pointer;
            box-shadow: 0 5px 0 #8b4513;
            transition: all 0.1s;
        }
        
        button:active {
            transform: translateY(5px);
            box-shadow: 0 0 0 #8b4513;
        }
        
        #controls {
            position: absolute;
            bottom: 20px;
            width: 100%;
            display: flex;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 20;
        }
        
        .d-pad, .action-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(3, 1fr);
            gap: 8px;
            width: 45%;
            max-width: 200px;
        }
        
        .control-btn {
            background: rgba(0, 0, 0, 0.6);
            border: 2px solid #fff;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            user-select: none;
            touch-action: none;
            aspect-ratio: 1/1;
        }
        
        .control-btn:active {
            background: rgba(255, 215, 0, 0.3);
            transform: scale(0.95);
        }
        
        #up { grid-area: 1 / 2 / 2 / 3; }
        #left { grid-area: 2 / 1 / 3 / 2; }
        #right { grid-area: 2 / 3 / 3 / 4; }
        #down { grid-area: 3 / 2 / 4 / 3; }
        
        #action-a, #action-b {
            background: linear-gradient(to bottom, #ff6b6b, #c44d4d);
            font-size: 20px;
            font-weight: bold;
        }
        
        #hud {
            position: absolute;
            top: 20px;
            left: 20px;
            color: white;
            text-shadow: 2px 2px 0 #000;
            font-size: 16px;
            background: rgba(0, 0, 0, 0.5);
            padding: 10px 15px;
            border-radius: 10px;
            z-index: 20;
        }
        
        #dialog {
            position: absolute;
            bottom: 120px;
            left: 50%;
            transform: translateX(-50%);
            width: 80%;
            background: rgba(0, 0, 0, 0.85);
            color: white;
            padding: 15px;
            border-radius: 15px;
            display: none;
            text-align: center;
            border: 2px solid #ffd700;
            font-size: 16px;
            z-index: 20;
        }
        
        #rotate-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(255, 215, 0, 0.8);
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            z-index: 50;
        }
        
        .health-heart {
            color: #ff6b6b;
            font-size: 20px;
            margin: 0 2px;
        }
        
        #enemy-counter {
            position: absolute;
            top: 20px;
            right: 20px;
            color: white;
            text-shadow: 2px 2px 0 #000;
            font-size: 16px;
            background: rgba(0, 0, 0, 0.5);
            padding: 10px 15px;
            border-radius: 10px;
            z-index: 20;
        }
    </style>
</head>
<body>
    <div id="rotate-message">
        <h2>Gire seu celular</h2>
        <div id="rotate-icon">üì±</div>
        <p>Para uma melhor experi√™ncia, vire seu celular para o modo paisagem (horizontal)</p>
        <button onclick="forceLandscape()">Jogar mesmo assim</button>
    </div>
    
    <div id="game-container">
        <canvas id="game-canvas"></canvas>
        
        <div id="hud">
            <div>Vida: <span id="health">‚ô•‚ô•‚ô•</span></div>
            <div>Moedas: <span id="coins">0</span>/5</div>
        </div>
        
        <div id="enemy-counter">
            Inimigos: <span id="enemy-count">0</span>/2
        </div>
        
        <div id="dialog">
            Bem-vindo √†s Aventuras Zilda! Colete todas as moedas para vencer.
        </div>
        
        <div id="start-screen">
            <h1>AVENTURAS ZILDA</h1>
            <p>Modo F√°cil - Apenas 2 inimigos!</p>
            <button id="start-btn">INICIAR AVENTURA</button>
        </div>
        
        <div id="game-over">
            <h1>FIM DE JOGO</h1>
            <p>Sua aventura chegou ao fim...</p>
            <button id="restart-btn">TENTAR NOVAMENTE</button>
        </div>
        
        <div id="controls">
            <div class="d-pad">
                <div class="control-btn" id="up">‚Üë</div>
                <div class="control-btn" id="left">‚Üê</div>
                <div class="control-btn" id="right">‚Üí</div>
                <div class="control-btn" id="down">‚Üì</div>
            </div>
            
            <div class="action-buttons">
                <div class="control-btn" id="action-b">B</div>
                <div class="control-btn" id="action-a">A</div>
            </div>
        </div>
    </div>

    <button id="rotate-button" onclick="forceLandscape()">üîÑ</button>

    <script>
        // Configura√ß√£o do jogo
        const canvas = document.getElementById('game-canvas');
        const ctx = canvas.getContext('2d');
        const startScreen = document.getElementById('start-screen');
        const gameOverScreen = document.getElementById('game-over');
        const dialog = document.getElementById('dialog');
        const rotateMessage = document.getElementById('rotate-message');
        
        // Vari√°veis do jogo
        let gameRunning = false;
        let enemySpawnTimer = null;
        let maxEnemies = 2;
        let player = {
            x: 0, y: 0,
            width: 30,
            height: 30,
            speed: 4,
            color: '#ff6b6b',
            direction: 'down'
        };
        
        let coins = [];
        let enemies = [];
        let obstacles = [];
        let playerCoins = 0;
        let playerHealth = 3;
        
        // Ajustar tamanho do canvas
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            if (player.x === 0 && player.y === 0) {
                player.x = canvas.width / 2 - player.width / 2;
                player.y = canvas.height / 2 - player.height / 2;
            } else {
                player.x = Math.max(0, Math.min(canvas.width - player.width, player.x));
                player.y = Math.max(0, Math.min(canvas.height - player.height, player.y));
            }
        }
        
        // For√ßar modo paisagem
        function forceLandscape() {
            rotateMessage.style.display = 'none';
            document.getElementById('game-container').style.display = 'block';
            resizeCanvas();
        }
        
        // Verificar orienta√ß√£o
        function checkOrientation() {
            if (window.innerHeight > window.innerWidth) {
                rotateMessage.style.display = 'flex';
            } else {
                rotateMessage.style.display = 'none';
                document.getElementById('game-container').style.display = 'block';
                resizeCanvas();
            }
        }
        
        // Inicializar jogo
        function initGame() {
            enemies = [];
            coins = [];
            
            for (let i = 0; i < 5; i++) {
                coins.push({
                    x: Math.random() * (canvas.width - 20),
                    y: Math.random() * (canvas.height - 60),
                    width: 15,
                    height: 15,
                    color: '#ffd700'
                });
            }
            
            obstacles = [
                {x: canvas.width * 0.2, y: canvas.height * 0.2, width: 60, height: 60, color: '#8a6d3b'},
                {x: canvas.width * 0.7, y: canvas.height * 0.3, width: 60, height: 60, color: '#8a6d3b'},
                {x: canvas.width * 0.4, y: canvas.height * 0.6, width: 60, height: 60, color: '#8a6d3b'}
            ];
            
            playerCoins = 0;
            playerHealth = 3;
            updateHUD();
            
            if (enemySpawnTimer) clearInterval(enemySpawnTimer);
            enemySpawnTimer = setInterval(spawnEnemy, 3000);
        }
        
        // Gerar inimigos
        function spawnEnemy() {
            if (enemies.length >= maxEnemies) return;
            
            enemies.push({
                x: Math.random() > 0.5 ? 0 : canvas.width - 30,
                y: Math.random() * (canvas.height - 30),
                width: 25,
                height: 25,
                color: '#8b0000',
                speed: 1.0
            });
            
            updateEnemyCounter();
        }
        
        // Atualizar HUD
        function updateHUD() {
            document.getElementById('coins').textContent = playerCoins;
            document.getElementById('health').innerHTML = '‚ô•'.repeat(playerHealth);
        }
        
        // Atualizar contador de inimigos
        function updateEnemyCounter() {
            document.getElementById('enemy-count').textContent = enemies.length;
        }
        
        // Desenhar jogador
        function drawPlayer() {
            ctx.fillStyle = player.color;
            ctx.fillRect(player.x, player.y, player.width, player.height);
            
            ctx.fillStyle = '#000';
            switch(player.direction) {
                case 'up':
                    ctx.fillRect(player.x + 8, player.y + 8, 5, 5);
                    ctx.fillRect(player.x + 18, player.y + 8, 5, 5);
                    break;
                case 'down':
                    ctx.fillRect(player.x + 8, player.y + 18, 5, 5);
                    ctx.fillRect(player.x + 18, player.y + 18, 5, 5);
                    break;
                case 'left':
                    ctx.fillRect(player.x + 8, player.y + 8, 5, 5);
                    ctx.fillRect(player.x + 8, player.y + 18, 5, 5);
                    break;
                case 'right':
                    ctx.fillRect(player.x + 18, player.y + 8, 5, 5);
                    ctx.fillRect(player.x + 18, player.y + 18, 5, 5);
                    break;
            }
        }
        
        // Desenhar objetos
        function drawObjects() {
            coins.forEach(coin => {
                ctx.fillStyle = coin.color;
                ctx.beginPath();
                ctx.arc(coin.x + coin.width/2, coin.y + coin.height/2, coin.width/2, 0, Math.PI * 2);
                ctx.fill();
                ctx.strokeStyle = '#daa520';
                ctx.lineWidth = 2;
                ctx.stroke();
            });
            
            enemies.forEach(enemy => {
                ctx.fillStyle = enemy.color;
                ctx.fillRect(enemy.x, enemy.y, enemy.width, enemy.height);
                
                ctx.fillStyle = '#fff';
                ctx.fillRect(enemy.x + 6, enemy.y + 6, 5, 5);
                ctx.fillRect(enemy.x + 16, enemy.y + 6, 5, 5);
            });
            
            obstacles.forEach(obstacle => {
                ctx.fillStyle = obstacle.color;
                ctx.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);
                
                ctx.strokeStyle = '#5d4037';
                ctx.lineWidth = 2;
                ctx.strokeRect(obstacle.x + 10, obstacle.y + 10, 15, 15);
                ctx.strokeRect(obstacle.x + 35, obstacle.y + 20, 15, 15);
                ctx.strokeRect(obstacle.x + 20, obstacle.y + 40, 15, 15);
            });
        }
        
        // Verificar colis√µes
        function checkCollisions() {
            coins.forEach((coin, index) => {
                if (
                    player.x < coin.x + coin.width &&
                    player.x + player.width > coin.x &&
                    player.y < coin.y + coin.height &&
                    player.y + player.height > coin.y
                ) {
                    coins.splice(index, 1);
                    playerCoins++;
                    updateHUD();
                    
                    if (playerCoins === 1) {
                        showDialog("Moeda coletada! Colete todas as 5 moedas.");
                    }
                    
                    if (playerCoins === 5) {
                        showDialog("Parab√©ns! Voc√™ coletou todas as moedas!");
                    }
                }
            });
            
            if (enemies.length > 0) {
                enemies.forEach(enemy => {
                    if (
                        player.x < enemy.x + enemy.width &&
                        player.x + player.width > enemy.x &&
                        player.y < enemy.y + enemy.height &&
                        player.y + player.height > enemy.y
                    ) {
                        playerHealth--;
                        updateHUD();
                        
                        player.x += (player.x - enemy.x) > 0 ? 30 : -30;
                        player.y += (player.y - enemy.y) > 0 ? 30 : -30;
                        
                        player.x = Math.max(0, Math.min(canvas.width - player.width, player.x));
                        player.y = Math.max(0, Math.min(canvas.height - player.height, player.y));
                        
                        if (playerHealth <= 0) {
                            gameOver();
                        }
                    }
                });
            }
        }
        
        // Mover inimigos
        function moveEnemies() {
            enemies.forEach(enemy => {
                if (enemy.x < player.x) enemy.x += enemy.speed;
                if (enemy.x > player.x) enemy.x -= enemy.speed;
                if (enemy.y < player.y) enemy.y += enemy.speed;
                if (enemy.y > player.y) enemy.y -= enemy.speed;
            });
        }
        
        // Mostrar di√°logo
        function showDialog(text) {
            dialog.textContent = text;
            dialog.style.display = 'block';
            setTimeout(() => {
                dialog.style.display = 'none';
            }, 3000);
        }
        
        // Game over
        function gameOver() {
            gameRunning = false;
            if (enemySpawnTimer) clearInterval(enemySpawnTimer);
            gameOverScreen.style.display = 'flex';
        }
        
        // Loop principal do jogo
        function gameLoop() {
            if (!gameRunning) return;
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            ctx.fillStyle = '#7cc242';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            ctx.fillStyle = '#d6ba73';
            ctx.fillRect(canvas.width/3, 0, 50, canvas.height);
            ctx.fillRect(0, canvas.height/2, canvas.width, 50);
            
            drawObjects();
            drawPlayer();
            moveEnemies();
            checkCollisions();
            
            requestAnimationFrame(gameLoop);
        }
        
        // Configurar controles
        function setupControls() {
            const controlButtons = ['up', 'down', 'left', 'right', 'action-a', 'action-b'];
            
            controlButtons.forEach(id => {
                const btn = document.getElementById(id);
                let intervalId;
                
                btn.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    handleControl(id);
                    
                    intervalId = setInterval(() => {
                        handleControl(id);
                    }, 100);
                });
                
                btn.addEventListener('touchend', (e) => {
                    e.preventDefault();
                    clearInterval(intervalId);
                });
                
                btn.addEventListener('touchcancel', (e) => {
                    e.preventDefault();
                    clearInterval(intervalId);
                });
            });
        }
        
        // Manipular controles
        function handleControl(id) {
            if (!gameRunning) return;
            
            switch(id) {
                case 'up':
                    player.y = Math.max(0, player.y - player.speed);
                    player.direction = 'up';
                    break;
                case 'down':
                    player.y = Math.min(canvas.height - player.height, player.y + player.speed);
                    player.direction = 'down';
                    break;
                case 'left':
                    player.x = Math.max(0, player.x - player.speed);
                    player.direction = 'left';
                    break;
                case 'right':
                    player.x = Math.min(canvas.width - player.width, player.x + player.speed);
                    player.direction = 'right';
                    break;
                case 'action-a':
                    showDialog("Procurando itens...");
                    break;
                case 'action-b':
                    showDialog("Ataque especial!");
                    break;
            }
        }
        
        // Inicializar o jogo
        function init() {
            resizeCanvas();
            checkOrientation();
            setupControls();
            
            window.addEventListener('resize', resizeCanvas);
            
            document.getElementById('start-btn').addEventListener('click', () => {
                startScreen.style.display = 'none';
                gameRunning = true;
                initGame();
                showDialog("Bem-vindo √†s Aventuras Zilda! Colete as 5 moedas. Apenas 2 inimigos aparecer√£o.");
                gameLoop();
            });
            
            document.getElementById('restart-btn').addEventListener('click', () => {
                gameOverScreen.style.display = 'none';
                gameRunning = true;
                initGame();
                gameLoop();
            });
        }
        
        window.addEventListener('load', init);
    </script>
</body>
</html>
